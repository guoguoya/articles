#ajax

AJAX = 异步 JavaScript 和 XML。


ajax 为了解决，每个用户单次请求需要重新加载页面的问题。


Ajax技术之主要目的在于局部交换客户端及服务器之间的数据

核心机制：
XMLHttpRequest 用于在后台与服务器交换数据。

方法：
open： 建立起对服务器的调用

send 向服务器发出请求

相关属性：

onreadystatechange：  状态改变的事件触发器，每个状态改变时都会触发这个事件处理器，通常会调用一个JavaScript函数


readyState：  请求的状态。有5个可取值：0 = 未初始化，1 = 正在加载，2 = 已加载，3 = 交互中，4 = 完成

responseText： 服务器的响应，返回数据的文本。

responseXML： 服务器的响应，返回数据的兼容DOM的XML文档对象 ，这个对象可以解析为一个DOM对象

status  服务器的HTTP状态码（如：404 = "文件末找到" 、200 ="成功" ，等等）

优点：

1.无需重新加载整个网页，能够更新部分网页的技术。
2.AJAX使用异步方式与服务器通信，不需要打断用户的操作，具有更加迅速的响应能力。

缺点：

>用户无法回到前一个页面状态，这是因为浏览器仅能记下历史记录中的静态页面

进行Ajax开发时，网络延迟——即用户发出请求到服务器发出响应之间的间隔——需要慎重考虑。


跨站的 XMLHttpRequest

绕过缓存

监测进度


Ajax 安全防范的方法：

判断request的来源地址。这样的方式不推荐，因为黑客可以更改http包头，从而绕过检测。
采用验证码。也不推荐，请各位大大想一下用户的感受，刚输入用户名就让我输入注册码？这样Ajax意义何在？
给一个IP在一个小时内，分配一些份额，比如500个（考虑到网吧等等多台机器一个IP，使用NAT的地方）。
Ajax 安全性经验法则：

如果你使用身份验证, 确定你在请求页上检查!
为 SQL 注入检查。
为 JavaScript 注入检查。
保留商务逻辑在服务器上!
不要假设每个请求是真正的!
确认检查数据!
审查请求的数据而且确定它是正确的。
目前为止我做的最多的防止ajax请求攻击的就是 添加验证码 、 添加随机 Token ， 限制同一请求在规定时间内的最大请求数量 、 服务器端校验数据正确性、尽量使用 POST 方法 。

下面我写一个在ajax请求的http头中添加一个随机Token来增加ajax请求的安全性。

csrf

xss 攻击